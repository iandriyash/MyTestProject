# Домашнее задание 15: Unit-тестирование
## Понятие unit-тестирования. Работа с программой через unit-тесты

**Ветка:** `homeworks/homework15`  
**Базовое задание:** Домашнее задание 6 «Понятия ООП: инкапсуляция»

---

## Структура проекта

```
src/
├── homeworks/
│   └── homework06/
│       ├── App.java           # Главный класс (очищен от пользовательского ввода)
│       ├── Product.java       # Класс продукта
│       └── Person.java        # Класс покупателя
└── test/
    └── homeworks/
        └── homework15/
            ├── AppTest.java       # Unit-тесты для App
            ├── ProductTest.java   # Unit-тесты для Product
            └── PersonTest.java    # Unit-тесты для Person
```

---

## Реализованные тесты

### AppTest.java
- **Всего тестов:** 16
- **Тесты createTestProducts():** 2
- **Тесты createTestPerson():** 5
- **Тесты makePurchase():** 3
- **Интеграционные тесты:** 2
- **Граничные тесты:** 3
- **Игнорируемых:** 0

### ProductTest.java
- **Всего тестов:** 22
- **Позитивные тесты:** 11 (создание с корректными параметрами)
- **Негативные тесты:** 6 (исключения при некорректных данных)
- **Тесты методов:** 4 (equals, hashCode, toString)
- **Игнорируемых:** 1 (демонстрация @Disabled)

### PersonTest.java
- **Всего тестов:** 29
- **Позитивные тесты:** 15 (создание, покупки, корзина)
- **Негативные тесты:** 6 (исключения при некорректных данных)
- **Тесты методов:** 6 (equals, hashCode, toString, printBasket)
- **Интеграционные:** 1 (взаимодействие с Product)
- **Игнорируемых:** 1 (функционал скидок)

---

## Ожидаемые исключения и их избежание

### 7. Ответ на вопрос: Какие исключения ожидаются? Можно ли их избежать?

#### Исключения в классе Product:
1. **`IllegalArgumentException`** при `name == null` или `name.isEmpty()`
2. **`IllegalArgumentException`** при `price < 0`

**Как избежать:**
- Валидация входных параметров перед созданием объекта
- Использование Optional для имени
- Проверка цены на неотрицательность

```java
public static Product safeCreateProduct(String name, double price) {
    if (name == null || name.trim().isEmpty()) {
        name = "Неизвестный продукт";
    }
    if (price < 0) {
        price = 0.0;
    }
    return new Product(name, price);
}
```

#### Исключения в классе Person:
1. **`IllegalArgumentException`** при `name == null` или `name.isEmpty()`
2. **`IllegalArgumentException`** при `money < 0`

**Как избежать:**
- Предварительная валидация данных
- Установка значений по умолчанию
- Использование Builder Pattern

```java
public static Person safeCreatePerson(String name, double money) {
    if (name == null || name.trim().isEmpty()) {
        name = "Анонимный покупатель";
    }
    if (money < 0) {
        money = 0.0;
    }
    return new Person(name, money);
}
```

---

## Покрытие тестами

### 8. Ответ на вопрос: Вся ли программа покрыта тестами?

#### Покрыто тестами:
- **Конструкторы** всех классов (позитивные и негативные сценарии)
- **Геттеры** (getName, getPrice, getMoney)
- **Методы equals/hashCode** (различные сценарии сравнения)
- **Метод toString** (проверка формата вывода)
- **addProductToBasket** (успешные и неуспешные покупки)
- **printBasket** (пустая корзина и с товарами)
- **Вспомогательные методы App** (createTestProducts, createTestPerson, makePurchase)
- **getLineFromScanner** (новый метод для тестирования)

#### Не покрыто тестами:
- **Метод main** (намеренно очищен от логики)
- **System.out.println** выводы (сложно тестировать)
- **Приватные поля** (тестируются косвенно через публичные методы)

#### Оценка покрытия:
- **Product:** 95% (все значимые методы)
- **Person:** 90% (основная логика покрыта)
- **App:** 85% (вспомогательные методы)
- **Общее покрытие:** 90%

---

## Инструкция по запуску

### 1. Настройка среды:
```bash
git checkout -b homeworks/homework15
```

### 2. Структура в IntelliJ IDEA:
1. **Создать папку test** в src
2. **Mark Directory as Test Sources Root**
3. **Добавить JUnit 5.8.1** в External Libraries
4. **Разместить тесты** в src/test/homeworks/homework15/

### 3. Запуск тестов:
- Правый клик на test → Run All Tests
- Или запустить каждый тестовый класс отдельно

### 4. Ожидаемый результат:
```
AppTest: 16 passed, 0 ignored  
ProductTest: 21 passed, 1 ignored
PersonTest: 28 passed, 1 ignored

Total: 65 passed, 2 ignored, 0 failed
```

---

## Выполненные требования

- **1.** Структурирована программа, создана папка test
- **2.** Добавлен jUnit версии 5.8.1
- **3.** Убран из main функционал (очищен код)
- **4.** Реализованы позитивные Unit тесты с параметрами и без
- **5.** Реализованы негативные Unit тесты с параметрами и без
- **6.** Реализованы тесты на исключения
- **7.** Дан ответ про исключения и их избежание
- **8.** Игнорирован один тест (@Disabled)
- **9.** Дан ответ про покрытие тестами

---

## Планируемый результат

1. **Ссылка на программу:** `https://github.com/iandriyash/MyTestProject/tree/main/test/homeworks/homework15`
2. **Отчет со скринами:** Код тестов и результаты выполнения в консоли
3. **Функциональность:** Полный набор unit-тестов для проверки всего функционала

---

## Заключение

Проект демонстрирует:
- Профессиональный подход к unit-тестированию
- Покрытие различных сценариев (позитивных, негативных, граничных)
- Использование современных возможностей JUnit 5
- Интеграционное тестирование компонентов
- Обработку исключительных ситуаций

**Результат:** Надежная, хорошо протестированная система с высоким покрытием тестами.